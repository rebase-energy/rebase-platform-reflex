import reflex as rx
from app.states.collections import CollectionsState


# Common emoji categories - simplified for better performance
EMOJI_CATEGORIES = {
    "Smileys & Emotion": ["ðŸ˜€", "ðŸ˜ƒ", "ðŸ˜„", "ðŸ˜", "ðŸ˜†", "ðŸ˜…", "ðŸ¤£", "ðŸ˜‚", "ðŸ™‚", "ðŸ™ƒ", "ðŸ˜‰", "ðŸ˜Š", "ðŸ˜‡", "ðŸ¥°", "ðŸ˜", "ðŸ¤©", "ðŸ˜˜", "ðŸ˜—", "ðŸ˜š", "ðŸ˜™", "ðŸ˜‹", "ðŸ˜›", "ðŸ˜œ", "ðŸ¤ª", "ðŸ˜", "ðŸ¤‘", "ðŸ¤—", "ðŸ¤­", "ðŸ¤«", "ðŸ¤”", "ðŸ¤", "ðŸ¤¨", "ðŸ˜", "ðŸ˜‘", "ðŸ˜¶", "ðŸ˜", "ðŸ˜’", "ðŸ™„", "ðŸ˜¬", "ðŸ¤¥", "ðŸ˜Œ", "ðŸ˜”", "ðŸ˜ª", "ðŸ¤¤", "ðŸ˜´", "ðŸ˜·", "ðŸ¤’", "ðŸ¤•", "ðŸ¤¢", "ðŸ¤®", "ðŸ¤§", "ðŸ¥µ", "ðŸ¥¶", "ðŸ˜µ", "ðŸ¤¯", "ðŸ¤ ", "ðŸ¥³", "ðŸ˜Ž", "ðŸ¤“", "ðŸ§"],
    "Objects": ["âŒš", "ðŸ“±", "ðŸ“²", "ðŸ’»", "âŒ¨ï¸", "ðŸ–¥ï¸", "ðŸ–¨ï¸", "ðŸ–±ï¸", "ðŸ–²ï¸", "ðŸ•¹ï¸", "ðŸ’¾", "ðŸ’¿", "ðŸ“€", "ðŸ“·", "ðŸ“¸", "ðŸ“¹", "ðŸŽ¥", "ðŸ“ž", "â˜Žï¸", "ðŸ“º", "ðŸ“»", "ðŸŽ™ï¸", "â°", "ðŸ•°ï¸", "âŒ›", "â³", "ðŸ“¡", "ðŸ”‹", "ðŸ”Œ", "ðŸ’¡", "ðŸ”¦", "ðŸ•¯ï¸", "ðŸ§¯", "ðŸ’¸", "ðŸ’µ", "ðŸ’´", "ðŸ’¶", "ðŸ’·", "ðŸ’°", "ðŸ’³", "ðŸ’Ž", "âš–ï¸", "ðŸ§°", "ðŸª›", "ðŸ”§", "ðŸ”¨", "ðŸ› ï¸", "â›ï¸", "ðŸ”©", "âš™ï¸", "ðŸ§±", "â›“ï¸", "ðŸ§²", "ðŸ’£", "ðŸ§¨", "ðŸª“", "ðŸ”ª", "ðŸ—¡ï¸", "âš”ï¸", "ðŸ›¡ï¸", "ðŸ”®", "ðŸ“¿", "ðŸ§¿", "ðŸ’ˆ", "âš—ï¸", "ðŸ”­", "ðŸ”¬", "ðŸ•³ï¸", "ðŸ©¹", "ðŸ©º", "ðŸ’Š", "ðŸ’‰", "ðŸ©¸", "ðŸ§¬", "ðŸ¦ ", "ðŸ§«", "ðŸ§ª", "ðŸŒ¡ï¸", "ðŸ§¹", "ðŸª ", "ðŸ§º", "ðŸ§»", "ðŸš½", "ðŸš°", "ðŸš¿", "ðŸ›", "ðŸ›€", "ðŸ§¼", "ðŸª’", "ðŸ§½", "ðŸª£", "ðŸ§´", "ðŸ›Žï¸", "ðŸ”‘", "ðŸ—ï¸", "ðŸšª", "ðŸª‘", "ðŸ›‹ï¸", "ðŸ›ï¸", "ðŸ›Œ", "ðŸ§¸", "ðŸ–¼ï¸", "ðŸªž", "ðŸªŸ", "ðŸ›ï¸", "ðŸ›’", "ðŸŽ", "ðŸŽˆ", "ðŸŽ", "ðŸŽ€", "ðŸª„", "ðŸª…", "ðŸŽŠ", "ðŸŽ‰", "ðŸŽŽ", "ðŸ®", "ðŸŽ", "ðŸ§§", "âœ‰ï¸", "ðŸ“©", "ðŸ“¨", "ðŸ“§", "ðŸ’Œ", "ðŸ“¥", "ðŸ“¤", "ðŸ“¦", "ðŸª§", "ðŸ“ª", "ðŸ“«", "ðŸ“¬", "ðŸ“­", "ðŸ“®", "ðŸ“¯", "ðŸ“œ", "ðŸ“ƒ", "ðŸ“„", "ðŸ“‘", "ðŸ§¾", "ðŸ“Š", "ðŸ“ˆ", "ðŸ“‰", "ðŸ—’ï¸", "ðŸ—“ï¸", "ðŸ“†", "ðŸ“…", "ðŸ—‘ï¸", "ðŸ“‡", "ðŸ—ƒï¸", "ðŸ—³ï¸", "ðŸ—„ï¸", "ðŸ“‹", "ðŸ“", "ðŸ“‚", "ðŸ—‚ï¸", "ðŸ““", "ðŸ“”", "ðŸ“’", "ðŸ“•", "ðŸ“—", "ðŸ“˜", "ðŸ“™", "ðŸ“š", "ðŸ“–", "ðŸ”–", "ðŸ§·", "ðŸ”—", "ðŸ“Ž", "ðŸ–‡ï¸", "ðŸ“", "ðŸ“", "ðŸ§®", "ðŸ“Œ", "ðŸ“", "âœ‚ï¸", "ðŸ–Šï¸", "ðŸ–‹ï¸", "âœ’ï¸", "ðŸ–Œï¸", "ðŸ–ï¸", "ðŸ“", "âœï¸", "ðŸ”", "ðŸ”Ž", "ðŸ”", "ðŸ”", "ðŸ”’", "ðŸ”“"],
    "Symbols": ["â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ", "ðŸ–¤", "ðŸ¤", "ðŸ¤Ž", "ðŸ’”", "â£ï¸", "ðŸ’•", "ðŸ’ž", "ðŸ’“", "ðŸ’—", "ðŸ’–", "ðŸ’˜", "ðŸ’", "ðŸ’Ÿ", "â˜®ï¸", "âœï¸", "â˜ªï¸", "ðŸ•‰ï¸", "â˜¸ï¸", "ðŸ•Ž", "ðŸ”¯", "ðŸª¯", "ðŸ›", "â›Ž", "â™ˆ", "â™‰", "â™Š", "â™‹", "â™Œ", "â™", "â™Ž", "â™", "â™", "â™‘", "â™’", "â™“", "ðŸ†”", "âš›ï¸", "ðŸ‰‘", "â˜¢ï¸", "â˜£ï¸", "ðŸ“´", "ðŸ“³", "ðŸˆ¶", "ðŸˆš", "ðŸˆ¸", "ðŸˆº", "ðŸˆ·ï¸", "âœ´ï¸", "ðŸ†š", "ðŸ’®", "ðŸ‰", "ãŠ™ï¸", "ãŠ—ï¸", "ðŸˆ´", "ðŸˆµ", "ðŸˆ¹", "ðŸˆ²", "ðŸ…°ï¸", "ðŸ…±ï¸", "ðŸ†Ž", "ðŸ†‘", "ðŸ…¾ï¸", "ðŸ†˜", "âŒ", "â­•", "ðŸ›‘", "â›”", "ðŸ“›", "ðŸš«", "ðŸ’¯", "ðŸ’¢", "â™¨ï¸", "ðŸš·", "ðŸš¯", "ðŸš³", "ðŸš±", "ðŸ”ž", "ðŸ“µ", "ðŸš­", "â—", "â“", "â•", "â”", "â€¼ï¸", "â‰ï¸", "ðŸ”…", "ðŸ”†", "ã€½ï¸", "âš ï¸", "ðŸš¸", "ðŸ”±", "âšœï¸", "ðŸ”°", "â™»ï¸", "âœ…", "ðŸˆ¯", "ðŸ’¹", "â‡ï¸", "âœ³ï¸", "âŽ", "ðŸŒ", "ðŸ’ ", "â“‚ï¸", "ðŸŒ€", "ðŸ’¤", "ðŸ§", "ðŸš¾", "â™¿", "ðŸ…¿ï¸", "ðŸˆ³", "ðŸˆ‚ï¸", "ðŸ›‚", "ðŸ›ƒ", "ðŸ›„", "ðŸ›…", "ðŸš¹", "ðŸšº", "ðŸš¼", "ðŸš»", "ðŸš®", "ðŸŽ¦", "ðŸ“¶", "ðŸˆ", "ðŸ”£", "â„¹ï¸", "ðŸ”¤", "ðŸ”¡", "ðŸ” ", "ðŸ”¢", "ðŸ”Ÿ", "#ï¸âƒ£", "*ï¸âƒ£", "0ï¸âƒ£", "1ï¸âƒ£", "2ï¸âƒ£", "3ï¸âƒ£", "4ï¸âƒ£", "5ï¸âƒ£", "6ï¸âƒ£", "7ï¸âƒ£", "8ï¸âƒ£", "9ï¸âƒ£", "ðŸ”Ÿ", "ðŸ”º", "ðŸ”»", "ðŸ’±", "ðŸ’²"],
}




def emoji_picker() -> rx.Component:
    """Emoji picker component."""
    return rx.cond(
        CollectionsState.show_emoji_picker,
        rx.el.div(
            # Click outside overlay
            rx.el.div(
                on_click=CollectionsState.toggle_emoji_picker,
                class_name="fixed inset-0 z-40",
                style={"zIndex": 999},
            ),
            # Emoji picker panel
            rx.el.div(
                # Search input
                rx.el.input(
                    type="text",
                    placeholder="Search Emojis",
                    value=CollectionsState.emoji_search_query,
                    on_change=CollectionsState.set_emoji_search_query,
                    class_name="w-full px-3 py-2 mb-3 border border-gray-700 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-green-500 text-sm",
                    style={"backgroundColor": "rgb(23, 23, 25)"},
                ),
                # Category tabs
                rx.el.div(
                    rx.foreach(
                        list(EMOJI_CATEGORIES.keys()),
                        lambda category: rx.el.button(
                            category,
                            on_click=CollectionsState.set_emoji_category(category),
                            class_name=rx.cond(
                                CollectionsState.emoji_selected_category == category,
                                "px-3 py-1 text-sm text-white border-b-2 border-green-500 transition-colors",
                                "px-3 py-1 text-sm text-gray-400 hover:text-white border-b-2 border-transparent hover:border-green-500 transition-colors",
                            ),
                        ),
                    ),
                    class_name="flex space-x-4 mb-3 overflow-x-auto",
                ),
                # Emoji grid
                rx.el.div(
                    rx.foreach(
                        CollectionsState.current_emoji_list,
                        lambda emoji: rx.el.button(
                            emoji,
                            on_click=CollectionsState.set_collection_emoji(emoji),
                            class_name="w-8 h-8 text-xl hover:bg-gray-700 rounded transition-colors flex items-center justify-center",
                        ),
                    ),
                    class_name="grid grid-cols-8 gap-1 max-h-64 overflow-y-auto",
                ),
                class_name="absolute top-full left-0 mt-2 w-80 border border-gray-700 rounded-lg shadow-xl p-4 z-50",
                style={"maxHeight": "400px", "zIndex": 1000, "backgroundColor": "rgb(23, 23, 25)"},
            ),
            class_name="relative",
        ),
    )

